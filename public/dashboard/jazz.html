<!DOCTYPE html>
<html lang="pt-br">
<!-- 19/06 -->

<head>

    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="../assets/img/icon.png" type="image/x-icon">
    <title>PRAISE DANCE | Quiz</title>
    <link rel="stylesheet" href="../css/quiz3.css" />


    <script src="../js/sessao.js"></script>
    <script src="./../js/alerta.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com" />

    <link
        href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet" />


    <!-- scripts do Chart.js - 2022-1 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!--FONT AWESOME-->
    <script src="https://kit.fontawesome.com/9f7414eb10.js" crossorigin="anonymous"></script>

</head>

<body>
    <header>
        <div class="menu-1">
            <div>
                <img class="img" src="../assets/img/elemento.png" alt="" />
            </div>
        </div>

        <nav class="menu">
            <img class="imgJanela" src="../assets/img/2.png" alt="" />
            <center>
                <h3>Olá <span id="b_usuario"></span>!</h3>
            </center>
            <ul>
                <br />
                <br />
                <div class="btn-nav-white">
                    <a href="cards.html">
                        <h3>MAIN PAGE</h3>
                    </a>
                </div>

                <div class="btn-nav">
                    <a href="quiz.html">
                        <h3>QUIZ</h3>
                    </a>
                </div>

                <div class="btn-nav-white">
                    <a href="ranking.html">
                        <h3>ranking</h3>
                    </a>
                </div>

                <div class="btn-nav-white">
<<<<<<< HEAD
                    <a href="dashboard.html">
                        <h3>graficoS</h3>
                    </a>
                </div>

                <div class="btn-nav-white">
=======
>>>>>>> ee78b49fbf523802668217e5e25ce0dba8874a30
                    <a href="mural.html">
                        <h3>post</h3>
                    </a>
                </div>

<<<<<<< HEAD


=======
>>>>>>> ee78b49fbf523802668217e5e25ce0dba8874a30
                <div class="btn-logout" onclick="limparSessao()">
                    <h3>Sair</h3>
                </div>
            </ul>
        </nav>
    </header>
    <div class="quiz-container">
        <h1>Quiz de jazz</h1>
        <button id="iniciar" class="botao">Iniciar Quiz</button>
        <div id="pergunta" class="quiz-question" style="display: none"></div>
        <div id="opcoes" class="quiz-options" style="display: none"></div>
        <button id="enviar" style="display: none">Enviar</button>
        <div id="resultado" style="display: none"></div>
    </div>
    </div>

</body>
<script>

    // Seleciona o botão do menu
    const menuToggle = document.querySelector(".menu-1");
    // Seleciona o menu de navegação
    const menu = document.querySelector(".menu");

    // Adiciona um evento de clique ao botão do menu
    menuToggle.addEventListener("click", function () {
        // Alterna a classe 'active' no menu de navegação
        menu.classList.toggle("active");
    });

    // Adiciona um evento de clique ao documento inteiro
    document.addEventListener("click", function (event) {
        // Verifica se o clique ocorreu fora do menu
        if (
            !menu.contains(event.target) &&
            !menuToggle.contains(event.target)
        ) {
            // Fecha o menu
            menu.classList.remove("active");
        }
    });
    /*Variavel de um vetor que armazena todas as perguntas, opções e respostas*/
    const perguntasJazz = [
        {
            pergunta: "Qual é o estilo de dança que se originou nos Estados Unidos na década de 1920 e se tornou popular durante a era do jazz?",
            opcoes: [
                "Ballet",
                "Salsa",
                "Charleston",
                "Flamenco",
            ],
            resposta: "Charleston",
        },
        {
            pergunta: "Quem é considerado o pioneiro do breakdance?",
            opcoes: ["Michael Jackson", "James Brown", "Afrika Bambaataa", "DJ Kool Herc"],
            resposta: "DJ Kool Herc",
        },
        {
            pergunta:
                "Qual é o nome do estilo de dança tradicional do Havaí que é caracterizado por movimentos suaves e graciosos?",
            opcoes: ["Hula", "Samba", "Flamenco", "Tango"],
            resposta: "Hula",
        },
        {
            pergunta:
                "O que é um 'pas de bourrée' na dança jazz?",
            opcoes: [
                "Um tipo de ritmo musical",
                "Um tipo de calçado usado pelos dançarinos",
                "Um movimento de deslizamento rápido dos pés",
                "Um estilo de coreografia fixa",
            ],
            resposta: "Um movimento de deslizamento rápido dos pés",
        },
        {
            pergunta: "Qual é a importância da improvisação na dança jazz?",
            opcoes: [
                "Não é permitida na dança jazz",
                "Ajuda a desenvolver a técnica dos dançarinos",
                "É usada apenas em competições de dança",
                "É exclusiva de dançarinos profissionais",
            ],
            resposta: "Ajuda a desenvolver a técnica dos dançarinos",
        },
        {
            pergunta:
                "Quais são os elementos comuns de uma coreografia de dança jazz?",
            opcoes: [
                "Movimentos lentos e expressivos",
                "Uso exclusivo de saltos acrobáticos",
                "Energia, dinamismo e isolamentos",
                "Utilização de adereços complexos",
            ],
            resposta: "Energia, dinamismo e isolamentos",
        },
        {
            pergunta: "O que são 'battements' na dança jazz?",
            opcoes: [
                "Uma forma de aplauso da plateia",
                "Um tipo de exercício de aquecimento",
                "Um estilo de calçado utilizado",
                "Movimentos de chutes rápidos e controlados",
            ],
            resposta: "Movimentos de chutes rápidos e controlados",
        },
        {
            pergunta:
                "Quais são as origens da dança jazz?",
            opcoes: [
                "África e América Latina",
                "Estados Unidos e Europa",
                "Rússia e Espanha",
                "Ásia e Europa",
            ],
            resposta: "Estados Unidos e Europa",
        },
        {
            pergunta:
                "Quem é considerado um dos pioneiros da dança jazz?",
            opcoes: [" Martha Graham", "Gene Kelly", "Mikhail Baryshnikov", "Alvin Ailey"],
            resposta: "Gene Kelly",
        },
        {
            pergunta:
                "Qual é o objetivo principal da dança jazz?",
            opcoes: [
                "Transmitir histórias tradicionais",
                "Explorar movimentos de animais",
                "Expressar emoções através do movimento",
                "Praticar coreografias clássicas"
            ],
            resposta: "Expressar emoções através do movimento",
        },
    ];

    let perguntaAtual = 0;
    let acertos = 0;
    let erros = 0;

    const elementoPergunta = document.getElementById("pergunta");
    const elementoOpcoes = document.getElementById("opcoes");
    const elementoResultado = document.getElementById("resultado");
    const botaoIniciar = document.getElementById("iniciar");
    const botaoEnviar = document.getElementById("enviar");

    botaoIniciar.addEventListener("click", () => iniciarQuiz());

    function iniciarQuiz() {
        perguntaAtual = 0;
        exibirPergunta();
        botaoIniciar.style.display = "none";
        elementoPergunta.style.display = "block";
        elementoOpcoes.style.display = "block";
        botaoEnviar.style.display = "none";
    }

    function exibirPergunta() {
        elementoPergunta.textContent =
            perguntasJazz[perguntaAtual].pergunta;
        elementoOpcoes.innerHTML = "";
        /*Exibe as perguntas em ordem assim como as opções*/
        for (
            let i = 0;
            i < perguntasJazz[perguntaAtual].opcoes.length;
            i++
        ) {
            const botao = document.createElement("button");
            botao.textContent = perguntasJazz[perguntaAtual].opcoes[i];
            botao.classList.add("quiz-opcao"); // Adiciona a classe botao-opcao
            botao.addEventListener("click", (event) =>
                verificarResposta(event.target.textContent)
            ); // Passa o texto do botão clicado
            elementoOpcoes.appendChild(botao);
        }
    }

    function verificarResposta(opcao) {

        const opcoes = elementoOpcoes.querySelectorAll(".quiz-opcao");
        opcoes.forEach(botao => {
            botao.disabled = true; // Desabilita todos os botões após clicar em uma resposta
            if (botao.textContent === perguntasJazz[perguntaAtual].resposta) {
                botao.classList.add("correta");
            } else if (botao.textContent === opcao) {
                botao.classList.add("errada");
            }
        });

        if (opcao === perguntasJazz[perguntaAtual].resposta) {
            acertos++;
        } else {
            erros++
        }
        perguntaAtual++;
        if (perguntaAtual < perguntasJazz.length) {
            setTimeout(() => exibirPergunta(), 1000); // Exibe próxima pergunta após 1 segundo
        } else {
            setTimeout(() => mostrarResultado(), 1000); // Mostra resultado após 1 segundo
        }
    }

    function mostrarResultado() {
        elementoPergunta.style.display = "none";
        elementoOpcoes.style.display = "none";
        botaoEnviar.style.display = "none";
        elementoResultado.textContent = `Você acertou ${acertos} de ${perguntasJazz.length} questões.`;
        elementoResultado.style.display = "block";
        /*Especificando o id da categoria, para ser inserida ao banco de dados */
        enviarPontuacao(acertos, erros, 3);

        setTimeout(() => {
            window.location.href = 'graficoballet.html';
        }, 2000);
    }

    function enviarPontuacao(acertos, erros, categoriaId) {
        const userId = sessionStorage.ID_USUARIO;
        const url = "/usuarios/armazenarPontuacao";
        const dados = {
            userId: userId,
            acertos: acertos,
            erros: erros,
            categoriaId: categoriaId
        };

        fetch(url, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify(dados),
        })
            .then((response) => {
                if (response.ok) {
                    console.log("Pontuação enviada com sucesso!");
                } else {
                    console.error("Falha ao enviar pontuação.");
                }
            })
            .catch((error) => {
                console.error("Erro ao enviar pontuação:", error);
            });
    }
</script>

</html>